resources:
  - name: githab_repo
    type: GitRepo
    configuration:
      gitProvider: skoriy88_github
      path: skoriy88/simple-springboot-app
      buildOn:
        commit: falce
      branches:
        include: master

  - name: simple_spring_boot_repo
    type: GitRepo
    configuration:
      gitProvider: skoriy88_github
      path: skoriy88/simple-springboot-app
      buildOn:
        commit: true
      branches:
        include: master

  - name: docker_repo
    type: GitRepo
    configuration:
      gitProvider: skoriy88_github
      path: skoriy88/jfrog_pipelines
      buildOn:
        commit: false
      branches:
        include: master
  
  - name: docker_image
    type: Image
    configuration:
      registry: art                                # <-- replace with your artifactory integration
      sourceRepository: mydockerrepo               # <-- required if registry is Artifactory
      imageName: mydockerrepo/skoriy88/test_docker # < -- replace with your image path and name
      imageTag: latest
      autoPull: true

  - name: my_docker_image
    type: Image
    configuration:
      registry: art                                # <-- replace with your artifactory integration
      sourceRepository: mydockerrepo               # <-- required if registry is Artifactory
      imageName: mydockerrepo/skoriy88/mydocker # < -- replace with your image path and name
      imageTag: latest
      autoPull: true

  - name: my_docker_image2
    type: Image
    configuration:
      registry: art                                # <-- replace with your artifactory integration
      sourceRepository: mydockerrepo               # <-- required if registry is Artifactory
      imageName: mydockerrepo/container1 # < -- replace with your image path and name
      imageTag: latest
      autoPull: true

  - name: docker_build_info
    type: BuildInfo
    configuration:
      sourceArtifactory: art
      # buildNumber: ${run_number}

  - name: mvn_build_info
    type: BuildInfo
    configuration:
      sourceArtifactory: art
      buildNumber: ${run_number}

  - name: builded_file
    type: FileSpec
    configuration:     
      sourceArtifactory: art
      pattern: mymavenrepo/*/combined-*${run_id}.war
      flat: true
      target: app.war

  - name: builded_file_full
    type: FileSpec
    configuration:     
      sourceArtifactory: art
      pattern: mymavenrepo/*/combined-*${run_id}.war
      flat: true
      target: fullcicd.war

  - name: docker_image_full
    type: Image
    configuration:
      registry: art                                # <-- replace with your artifactory integration
      sourceRepository: mydockerrepo               # <-- required if registry is Artifactory
      imageName: mydockerrepo/fullcicd # < -- replace with your image path and name
      imageTag: latest
      autoPull: true

  - name: docker_image_file
    type: FileSpec
    configuration:     
      sourceArtifactory: art
      pattern: mydockerrepo/skoriy88/test_docker:latest
      flat: true
      target: container

  - name: myFirstRepo
    type: GitRepo
    configuration:
      # SCM integration where the repository is located
      gitProvider: skoriy88_github # this will be replaced from values.yml
      # Repository path, including org name/repo name
      path: skoriy88/simple-springboot-app # this will be replaced from values.yml
      branches:
        # Specifies which branches will trigger dependent steps
        include: master

  - name: myPropertyBag
    type: PropertyBag
    configuration:
      commitSha: 1
      runID: 1